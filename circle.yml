general:
  build_dir: Ambassador

machine:
  timezone:
    America/Detroit
  xcode:
    version: "7.0"
checkout:
  post:
    - git submodule sync
    - git submodule update --init
dependencies:
  pre:
    - sudo gem install cocoapods xcpretty obcd slather -N
test:
  override:
    commands:
      - xcodebuild
          -project 'Ambassador.xcodeproj'
          -scheme "TestApplication"
          -sdk iphonesimulator -destination 'platform=iOS Simulator,OS=9.0,name=iPhone 6'
          -configuration 'Debug'
          -enableCodeCoverage YES
          clean test



      - xcodebuild
         -project 'Ambassador.xcodeproj'
         -scheme "TestApplication"
         -sdk iphonesimulator
         -configuration 'Debug'
         -showBuildSettings > ${BUILD_SETTINGS}

      - xcrun llvm-cov show -instr-profile ${PROFDATA} -xcrun llvm-cov show ${BINARY}

  post:

    - bundle exec slather coverage -s Ambassador.xcodeproj
